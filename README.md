# Лабораторная работа №2
## Цель работы
Приобретение практических навыков в:
- использовании потоков POSIX (pthread);
- организации параллельных вычислений;
- применении мьютексов для синхронизации доступа к общим данным;
- измерении производительности и исследовании эффективности многопоточности.

## Задание
Разработать программу на языке C, которая:
1. Считывает из файла набор точек в 3D-пространстве (координаты X, Y, Z);
2. Находит треугольник с максимальной площадью, образованный любыми тремя точками;
3. Реализует многопоточную обработку комбинаций точек с помощью библиотеки pthread;
4. Выполняет замер времени выполнения при разном числе потоков;
5. Сравнивает эффективность параллельного и последовательного выполнения.

## Структура проекта
```
doc/
├── report.docx           # Отчёт по лабораторной
src/
├── main.c                # Основной файл программы
├── functions.c           # Файл с второстепенными функциями
├── run.sh                # Запуск тестов
test/
├── test_1.txt            # Тестовые файлы с координатами
├── test_2.txt
├── ...
```

## Описание файлов
### main.c
Основной файл программы, выполняющий:
- Считывание данных из текстового файла с координатами точек;
- Создание заданного числа потоков с помощью pthread_create;
- Распределение диапазонов точек между потоками;
- Синхронизацию доступа к общим переменным с использованием mutex;
- Определение максимальной площади треугольника;
- Замер и вывод результата выполнения программы.

### Используемые функции и механизмы:
- pthread_t, pthread_create(), pthread_join() — создание и управление потоками;
- pthread_mutex_t, pthread_mutex_lock(), pthread_mutex_unlock() — синхронизация данных;

### run.sh
Сценарий автоматического тестирования, который:
- последовательно запускает программу для всех файлов test_i.txt;
- измеряет общее время выполнения всех тестов;
- выводит результаты в консоль.

## Пример запуска:
> [!IMPORTANT]
> 
> **Запуск через wsl**
> 
> Для корректной работы компиляция выполняется с ключом -lm (подключение math.h):
>
>gcc -o main main.c -lm
>


## Пример работы
```
./main test_0.txt 20
Метод 1 с фиксированным диапазоном (делим массив на части для индекса i):
Максимальная площадь = 0.87
время = 1.31 ms
Метод 2 с динамическим распределением (поочередно потоки берут индекс i):
Максимальная площадь = 0.87
время = 1.15 ms
 ```

## Особенности реализации
- Использована библиотека pthread для организации параллельных вычислений;
- Реализовано динамическое распределение задач между потоками;
- Доступ к общей переменной (максимальной площади) синхронизирован мьютексом;
- Проведено исследование эффективности многопоточности:
при увеличении числа потоков время выполнения уменьшилось почти в 5 раз (с 3000 мс до 600 мс при 20 потоках).

## Вывод
В результате лабораторной работы:
- Освоено создание и управление потоками в POSIX Threads;
- Изучены принципы синхронизации и предотвращения гонок данных;
- Проведено исследование влияния количества потоков на производительность.